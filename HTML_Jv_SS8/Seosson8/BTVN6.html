<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Report By Position</title>
</head>
<body>

<script>
   
    const players = [
        "Messi - Forward - 30 - 10 - 35",
        "Ronaldo - Forward - 28 - 15 - 34",
        "Neymar - Forward - 15 - 20 - 35",
        "De Bruyne - Midfielder - 8 - 25 - 35",
        "Van Dijk - Defender - 5 - 3 - 33"
    ];

    function reportByPosition(players) {

        console.log("BÁO CÁO HIỆU SUẤT THEO VỊ TRÍ\n");

        const grouped = players
            .map(p => {
                const [name, position, goals, assists, matches] = p.split(" - ");
                return {
                    name,
                    position,
                    goals: Number(goals),
                    assists: Number(assists),
                    matches: Number(matches)
                };
            })
            .reduce((acc, player) => {
                if (!acc[player.position]) {
                    acc[player.position] = {
                        count: 0,
                        totalGoals: 0,
                        totalAssists: 0,
                        totalMatches: 0
                    };
                }

                acc[player.position].count += 1;
                acc[player.position].totalGoals += player.goals;
                acc[player.position].totalAssists += player.assists;
                acc[player.position].totalMatches += player.matches;

                return acc;
            }, {});

        Object.entries(grouped).forEach(([position, data]) => {

            const totalPerformance = data.totalGoals + data.totalAssists;
            const avgPerformance = data.totalMatches === 0
                ? 0
                : (totalPerformance / data.totalMatches).toFixed(2);

            console.log(position + ":");
            console.log("- Số cầu thủ:", data.count);
            console.log("- Tổng bàn thắng:", data.totalGoals);
            console.log("- Tổng kiến tạo:", data.totalAssists);
            console.log("- Tổng số trận:", data.totalMatches);
            console.log("- Trung bình hiệu suất/trận:", avgPerformance);
            console.log("");
        });

        const totalTeamGoals = players
            .map(p => Number(p.split(" - ")[2]))
            .reduce((sum, g) => sum + g, 0);

        console.log("------------------------");
        console.log("Tổng bàn thắng toàn đội :", totalTeamGoals);
    }

    reportByPosition(players);

</script>

</body>
</html>